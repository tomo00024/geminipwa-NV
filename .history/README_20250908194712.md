# Gemini PWA (拡張版: 小説シーンビジュアライザー搭載)

このプロジェクトは、[titan823/geminipwa](https://github.com/titan823/geminipwa) をフォークし、**小説シーンビジュアライザー**機能を独自に追加したバージョンです。オリジナルの Gemini PWA クライアントの機能に加えて、生成された小説の内容に基づいて視覚的なシーンを表現する画像を動的に表示できるようになります。

自家用の API キーを用いてチャット AI と対話する主要な機能はそのままに、この新しい機能により、よりリッチな物語体験が可能になります。

---

### 🌟 新機能: 小説シーンビジュアライザー (Gemini 専用)

この機能は、Gemini モデルからの出力に基づいて、小説のシーンを視覚的に表現する画像を動的に表示します。

#### 概要

- **有効化**: 設定画面内の「小説シーンビジュアライザー (Gemini 専用)」セクションにあるチェックボックスをオンにすることで、この機能を有効にできます。
- **動作**: この機能を有効にすると、Gemini のストリーミング出力は自動的に無効になります。AI からの応答が完了した後、設定された JSON に基づいて画像 URL が生成され、表示されます。
- **カスタマイズ**: `画像生成設定 (JSON形式)` テキストエリアで、画像生成のためのルールを自由に定義できます。

---

### 利用方法

**当 PWA はブラウザから以下の URL にて利用可能です：**
`[ここにあなたのPWAのURLを記述してください]`

1.  このフォークを PWA としてインストールします（お使いのブラウザの機能を使用）。
2.  設定画面にアクセスし、ご自身の AI サービス API キー（例: Gemini API キー）を設定してください。
3.  新しく追加された「小説シーンビジュアライザー (Gemini 専用)」セクションで、機能を有効にし、JSON 形式で画像生成設定を記述します。
4.  チャットを開始し、AI が生成する小説の内容に基づいて画像が表示されることを確認します。

---

#### 設定方法

`画像生成設定 (JSON形式)` テキストエリアに、以下のような JSON 形式で設定を記述します。

```json
{
  "urlTemplate": "https://example.com/{character}/{outfit}/{expression}.avif",
  "parameters": {
    "character": ["ゆず", "アオイ"],
    "outfit": ["制服", "私服", "パジャマ", "水着"],
    "expression": ["笑顔", "怒り", "悲しみ", "通常", "困惑"]
  }
}
```

- **`urlTemplate`**: 画像ファイルのパスを定義するテンプレートです。`{}` で囲まれた部分は、`parameters` で定義されたキーに対応し、AI の出力に基づいて動的に置換されます。
- **`parameters`**: `urlTemplate` で使用される各カテゴリ（例: `character`, `outfit`, `expression`）に対して、取りうる値のリストを定義します。AI の出力からこれらの値が検出されると、対応する画像 URL が生成されます。

**設定の検証**: 「設定を検証」ボタンをクリックすることで、入力した JSON が正しい形式であるかを確認できます。

#### 注意事項

- この機能は現在 Gemini モデル専用です。
- この機能を有効にすると、Gemini のストリーミング出力は自動的に無効になります。
- 設定する画像 URL は、あらかじめご自身で用意しておく必要があります。このツール自体が画像を生成するわけではありません。

---

### 重要事項・免責事項

- このフォークは、個人的な利用のために作成されたものであり、オリジナルの `geminipwa` プロジェクトとは独立しています。
- 本プロジェクトは**サポートを提供しません**。また、予告なく仕様変更や更新が終了する可能性があります。
- 初めてデバイスで使用する際は、必ず必要最低限の機能からテストしてください。
- スマートフォンブラウザでの使用を想定しており、アプリ化や Windows 上でのローカル使用はデバッグされていません。
- 問題が発生した場合は、PWA のキャッシュ削除を試みてください。
- セッション履歴やプロンプトなどのデータは永続的に保存されることを意図しておらず、自動バックアップ機能もありません。重要なデータはご自身でバックアップしてください。
